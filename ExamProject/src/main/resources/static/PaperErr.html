<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>试题错误率</title>
    <script src="js/jquery-3.2.0.min.js"></script>
    <script src="js/echarts.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
        var total = [];
        var error_rate = [];
        $(document).ready(function () {
            $("#bt").click(function () {
                var examinee_name = document.getElementById("name").value;
                total = [];
                error_rate = [];
                $.ajax({
                    type: "Post",
                    url: "/hadoop/findErrorByCategory",
                    data: {category_name: examinee_name},
                    success: function (result) {
                        $.each(result, function (i, n) {
                            total[i]=n.question_id;
                            error_rate[i]=n.error_rate;
                        });
                        tt(total,error_rate)
                    }
                });
            });
        });

        function tt(total,error_rate) {
            alert(total)
            alert(error_rate)
            var myChart = echarts.init(document.getElementById('main'));
            option = {
                xAxis: {
                    type: 'category',
                    data: total
                },
                yAxis: {
                    type: 'value'
                },
                series: [{
                    data: error_rate,
                    type: 'line'
                }]
            };
            myChart.setOption(option);
        }

    </script>
</head>
<body>
考试场次 <input type="text" id="name"/>
<input type="submit" id="bt"/>
<div>
    <div id="main" style="width:1200px;height:700px;"></div>
</div>
</body>
</html>